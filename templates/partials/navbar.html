{% load static %}

<header class="">
    <nav
            class="navbar navbar-expand-lg bg-body-tertiary bg-opacity-75 pb-0 mb-0 fixed-top"
    >
        <div class="container-fluid">
            <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarsExample11"
                    aria-controls="navbarsExample11"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div
                    class="collapse navbar-collapse d-lg-flex justify-content-between"
                    id="navbarsExample11"
            >
                <div class="navbar-brand d-flex align-items-center col-lg-2 me-0 py-0" data-aos="fade">
                    <a href="{% url 'accueil' %}" style="text-decoration: none;">
                        <img
                                class="float-md-start mb-0 rounded-2 md-2 me-2"
                                src="{% static 'images/logo.jpg' %}"
                                width="40"
                                height="40"
                                alt="logo"
                        />
                        <p class="ms-2">&nbsp;&nbsp;</p>
                    </a>

                    <h5 class="h5 brand animate__animated" id="navbar-typed">&nbsp;</h5>
                </div>
                <script>
                    // Animation du titre navbar : fade, 3 cycles, puis reste sur Woila Community
                    document.addEventListener("DOMContentLoaded", function () {
                        const brand = document.getElementById("navbar-typed");
                        const words = ["Woila Community", "Woila Association", "Woila Team"];
                        let wordIndex = 0;
                        let loopCount = 0;
                        const maxLoops = 3;

                        function showWordFade() {
                            brand.classList.remove("animate__fadeIn");
                            void brand.offsetWidth; // force reflow
                            brand.textContent = words[wordIndex];
                            brand.classList.add("animate__fadeIn");
                            wordIndex++;
                            if (wordIndex >= words.length) {
                                wordIndex = 0;
                                loopCount++;
                            }
                            if (loopCount < maxLoops) {
                                setTimeout(showWordFade, 1200);
                            } else {
                                brand.textContent = "Woila Community";
                            }
                        }

                        showWordFade();
                    });
                </script>

                <ul
                        class="float-md-end mt-2 gap-4 navbar-nav col-lg-7 justify-content-lg-center text-center text-sm"
                >
                    <style>
                        .active {
                            border-bottom: none;
                        }
                        .parentActive{
                            border-bottom: 3px solid white;
                        }
                    </style>

                    <li class="nav-item">
                        <a
                                class="nav-link fw-bold py-1 px-0"
                                aria-current="page"
                                href="{% url 'accueil' %}"
                        >Accueil</a
                        >
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="{% url 'about' %}"
                        >À propos</a
                        >
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="#">Nos actions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="{% url 'blog' %}"
                        >Actualité</a
                        >
                    </li>
                    <li class="nav-item">
                        {% if not user.is_authenticated %}
                            <a class="nav-link fw-bold py-1 px-0" href="{% url 'adhesion' %}">Adhésion</a>
                        {% endif %}
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="{% url 'dashboard' %}"
                        >Espace membres</a
                        >
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="{% url 'galerie' %}"
                        >Galerie</a
                        >
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-bold py-1 px-0" href="{% url 'contact' %}"
                        >Contact</a
                        >
                    </li>
                    <li class="nav-item" data-aos="fade">
                        <a class="nav-link fw-bold py-1 px-0 text-warning" href="{% url 'don:don' %}">
                            <i class="fa fa-heart"></i> Faire un don
                        </a>
                    </li>
                </ul>
                <div class="d-lg-flex justify-content-lg-end">
                    {% if not user.is_authenticated %}
                        <p class="btn btn-outline-primary" data-aos="fade">
                            <a href="{% url 'adhesion' %}" class="text-decoration-none">S'inscrire</a>
                        </p>
                        <p class="btn btn-outline-primary">
                            <a href="{% url 'connexion' %}" class="text-decoration-none">Connexion</a>
                        </p>
                    {% else %}
                        <p class="btn btn-light">
                            <a href="{% url 'deconnexion' %}" class="text-decoration-none">Déconnexion</a>
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
</header>
